<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/app.7106b9c6fdd909feef5d.css">code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style data-href="/0.3c5fd8dc8e26d3cb63eb.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-50d279861fb3cbfed809eae6ed8b9ac9.woff2) format("woff2"),url(/static/montserrat-latin-100-5e334eff013f12fbb8ed72c2a253f119.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-8c0705336558194799a8729840d7ed9d.woff2) format("woff2"),url(/static/montserrat-latin-100italic-03e19243272affe738654a157625ec26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-4343d3d91a9446226e7a8bbb024111ad.woff2) format("woff2"),url(/static/montserrat-latin-200-f2022ecd65a0703ec3edcb7641709a75.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-116c4c4b14ef76b0555da09854512022.woff2) format("woff2"),url(/static/montserrat-latin-200italic-89614a6008fc5c60739012463d0ee7e6.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-d2ad295b60682a6537c358e06ea80c61.woff2) format("woff2"),url(/static/montserrat-latin-300-3a371ee0d175f5c2b15ce1d6b981dc4e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f6b6bf2431003f8142e800f9df157989.woff2) format("woff2"),url(/static/montserrat-latin-300italic-16521668f5f238098329cdd7d27c391e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-240a84447b78da0920fcb07e378f2c5f.woff2) format("woff2"),url(/static/montserrat-latin-400-b20cc131034316b1c85d0498fb9ed5c5.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-86172bb829de6be08b92512096b6aca6.woff2) format("woff2"),url(/static/montserrat-latin-400italic-9405e78785a55cf0e4ea7669d4616ea9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-fb8d6b71dbe8d9294be43082936f649e.woff2) format("woff2"),url(/static/montserrat-latin-500-50825d47af7ae47e055018eb689c6c99.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c0a555a4f8e997385a3eebbd4da0b9ee.woff2) format("woff2"),url(/static/montserrat-latin-500italic-635de59c4be86285b1f70068c95b9816.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-d5615136a08cfee70deb4be1ee1651df.woff2) format("woff2"),url(/static/montserrat-latin-600-f300da4fb4fe00e23915f62b2c643681.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-10f29d139edacde92df63374c5672568.woff2) format("woff2"),url(/static/montserrat-latin-600italic-2bc37d86a4ba12ce526c4af904a9946e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7d77e1f03eefc452dab14d7f89080083.woff2) format("woff2"),url(/static/montserrat-latin-700-81826529772e52f0f14a4c73c2f2c7f1.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-1dd2b53f1567a29e0505de9b27c4352c.woff2) format("woff2"),url(/static/montserrat-latin-700italic-c162d257f5e9f9b108a96a604cfb2132.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-d4e7bf86bbd8e5f43ca73fa831218648.woff2) format("woff2"),url(/static/montserrat-latin-800-895aadbff357be35ac8dd107c7975ee7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-fc0cbe442f7b3733c91e982e825c4daa.woff2) format("woff2"),url(/static/montserrat-latin-800italic-b3362875067300abedb7a8fb97903258.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-c8bdd772c0d1347720ff7e3fb72719f3.woff2) format("woff2"),url(/static/montserrat-latin-900-1b99ef78e627dd9bbd0ca4b5c0789547.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-cb72c1f90f66c124fb897a75bec64c78.woff2) format("woff2"),url(/static/montserrat-latin-900italic-b78bb9f8ecec6c5a924c873f1818095f.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-f015f1e9a46a3b9db4fd64564dacece4.woff2) format("woff2"),url(/static/merriweather-latin-300-92dfe81b725c342d31d962da975c07a6.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-7fd86b32accf2df4403d1d4fa3a81502.woff2) format("woff2"),url(/static/merriweather-latin-300italic-878b76f59d5ba58dd1652dc8d2a0f4f9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-12dbf4c00ae43698f278b099e4b0ec9e.woff2) format("woff2"),url(/static/merriweather-latin-400-1fffad22b085a877995812dbf1d9ac08.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-1e0d3e8121d88969bfb153c8f174b758.woff2) format("woff2"),url(/static/merriweather-latin-400italic-de18d4c4e8e808a7248a185f866ff094.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-dc8fec81a125fc63856587e6683da73b.woff2) format("woff2"),url(/static/merriweather-latin-700-d7d2ed8e58f303392cc3fc00ba3a9186.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-b7b7e5da4d7be8c12bd5a6c809edc8fc.woff2) format("woff2"),url(/static/merriweather-latin-700italic-6210a5fc1c54ca85a5d82aa85d7a9b5c.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-43f870d543dd89fbeb66d417c0d97276.woff2) format("woff2"),url(/static/merriweather-latin-900-8f3806df74937c7b8b53f24ae1e725d1.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-168c1ab28ed0e4e7d654334def288bc1.woff2) format("woff2"),url(/static/merriweather-latin-900italic-ae7778f01871e35ee142ef207b313b34.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.0.11"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><title data-react-helmet="true">Building an eCommerce Scraper with Node.js and React.js | Blogging!</title><meta data-react-helmet="true" name="description" content="
 Photo by  Brooke
Lark 
on
 Unsplash This is a quick story about how I created a simple but end-to-end e-commerce
scraping web application…"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-63278334-11', 'auto', {});
      
      }
      </script><link as="script" rel="preload" href="/component---src-templates-blog-post-js-8c4b7de89aa58d33c7cd.js"/><link as="script" rel="preload" href="/0-cee1a49f5378c1ba6db8.js"/><link as="script" rel="preload" href="/app-2c628e97cad5920cf5bd.js"/><link as="script" rel="preload" href="/webpack-runtime-b7f70802bfbf60d654ea.js"/><link rel="preload" href="/static/d/842/path---blog-building-an-ecommerce-scraper-with-node-js-and-react-js-4-fd-e15-LTcpcsJkOA3AHTsyK7AprViNRac.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin:0.875rem"><h3 style="margin-left:0.875rem;display:inline"><a style="box-shadow:none" href="/"> <!-- -->Blog<!-- --> </a></h3><h3 style="margin-left:0.875rem;display:inline"><a style="box-shadow:none" href="/projects"> <!-- -->Projects<!-- --> </a></h3><h3 style="margin-left:0.875rem;display:inline"><a style="box-shadow:none" href="/about-me"> <!-- -->About Me<!-- --> </a></h3><div style="float:right"><a target="_blank" style="box-shadow:none;margin-right:0.525rem" href="https://github.com/agustinaliagac"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" color="#ababab" size="30" style="color:#ababab" height="30" width="30"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a target="_blank" style="box-shadow:none;margin-right:0.525rem" href="https://www.linkedin.com/in/agustinaliaga/"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" color="#ababab" size="30" style="color:#ababab" height="30" width="30"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a target="_blank" style="box-shadow:none;margin-right:0.525rem" href="https://stackoverflow.com/users/3148273/agustin-aliaga"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" color="#ababab" size="30" style="color:#ababab" height="30" width="30"><path d="M293.7 300l-181.2-84.5 16.7-36.5 181.3 84.7-16.8 36.3zm48-76L188.2 95.7l-25.5 30.8 153.5 128.3 25.5-30.8zm39.6-31.7L262 32l-32 24 119.3 160.3 32-24zM290.7 311L95 269.7 86.8 309l195.7 41 8.2-39zm31.6 129H42.7V320h-40v160h359.5V320h-40v120zm-39.8-80h-200v39.7h200V360z"></path></svg></a><a target="_blank" style="box-shadow:none;margin-right:0.525rem" href="https://angel.co/agustin-aliaga"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" color="#ababab" size="30" style="color:#ababab" height="30" width="30"><path d="M347.1 215.4c11.7-32.6 45.4-126.9 45.4-157.1 0-26.6-15.7-48.9-43.7-48.9-44.6 0-84.6 131.7-97.1 163.1C242 144 196.6 0 156.6 0c-31.1 0-45.7 22.9-45.7 51.7 0 35.3 34.2 126.8 46.6 162-6.3-2.3-13.1-4.3-20-4.3-23.4 0-48.3 29.1-48.3 52.6 0 8.9 4.9 21.4 8 29.7-36.9 10-51.1 34.6-51.1 71.7C46 435.6 114.4 512 210.6 512c118 0 191.4-88.6 191.4-202.9 0-43.1-6.9-82-54.9-93.7zM311.7 108c4-12.3 21.1-64.3 37.1-64.3 8.6 0 10.9 8.9 10.9 16 0 19.1-38.6 124.6-47.1 148l-34-6 33.1-93.7zM142.3 48.3c0-11.9 14.5-45.7 46.3 47.1l34.6 100.3c-15.6-1.3-27.7-3-35.4 1.4-10.9-28.8-45.5-119.7-45.5-148.8zM140 244c29.3 0 67.1 94.6 67.1 107.4 0 5.1-4.9 11.4-10.6 11.4-20.9 0-76.9-76.9-76.9-97.7.1-7.7 12.7-21.1 20.4-21.1zm184.3 186.3c-29.1 32-66.3 48.6-109.7 48.6-59.4 0-106.3-32.6-128.9-88.3-17.1-43.4 3.8-68.3 20.6-68.3 11.4 0 54.3 60.3 54.3 73.1 0 4.9-7.7 8.3-11.7 8.3-16.1 0-22.4-15.5-51.1-51.4-29.7 29.7 20.5 86.9 58.3 86.9 26.1 0 43.1-24.2 38-42 3.7 0 8.3.3 11.7-.6 1.1 27.1 9.1 59.4 41.7 61.7 0-.9 2-7.1 2-7.4 0-17.4-10.6-32.6-10.6-50.3 0-28.3 21.7-55.7 43.7-71.7 8-6 17.7-9.7 27.1-13.1 9.7-3.7 20-8 27.4-15.4-1.1-11.2-5.7-21.1-16.9-21.1-27.7 0-120.6 4-120.6-39.7 0-6.7.1-13.1 17.4-13.1 32.3 0 114.3 8 138.3 29.1 18.1 16.1 24.3 113.2-31 174.7zm-98.6-126c9.7 3.1 19.7 4 29.7 6-7.4 5.4-14 12-20.3 19.1-2.8-8.5-6.2-16.8-9.4-25.1z"></path></svg></a><a target="_blank" style="box-shadow:none" href="https://medium.com/@agustin.aliaga"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" color="#ababab" size="30" style="color:#ababab" height="30" width="30"><path d="M0 32v448h448V32H0zm372.2 106.1l-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"></path></svg></a></div></div><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">Agustín Aliaga</a></h3><h1>Building an eCommerce Scraper with Node.js and React.js</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">April 12, 2018</p><div><p><img src="https://cdn-images-1.medium.com/max/2000/1*zq7U7ZvY70-anopuDJTyZQ.jpeg">
<span class="figcaption_hack">Photo by <a href="https://unsplash.com/photos/W1B2LpQOBxA?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText">Brooke
Lark</a>
on
<a href="https://unsplash.com/search/photos/shop-online?utm_source=unsplash&#x26;utm_medium=referral&#x26;utm_content=creditCopyText">Unsplash</a></span></p>
<p>This is a quick story about how I created a simple but end-to-end e-commerce
scraping web application called** “crawl-io”**. The goal behind this article is
to provide an example of an implementation so that other projects can borrow
ideas from it. The tech stack I picked for the job was MERN. Of course, keep in
mind that this article only reflects my personal experience and opinions. I’m
going to place Gists and Screenshots across the article, but <a href="https://github.com/agustinaliagac/crawl-io">check the actual
repo</a> in case some of it gets
outdated. One final warning: the language of the UI text is Spanish and the
crawled sites are from my country (Argentina), only beacuse I didn’t get the
time to add others yet. The code and the concepts apply for any other e-commerce
site as well.</p>
<h3>What does “crawl-io” do exactly ?</h3>
<p>The purpose of this application is quite simple. It allows the user to type in a
specific product name, to crawl multiple e-commerce sites and asynchronously
return useful results to the user. Some cool stuff that I didn’t include because
of lack of time are custom filtering and caching.</p>
<h3>UI and Architecture</h3>
<h4>Building the front end</h4>
<p>To make it short, the front end is really small (only two pages: one for the
search box and another one for the results). The application only uses
client-side rendering. This could be considered as a flaw in terms of SEO, but
it wasn’t really important in this case. React.js was really useful to create
the base components (with a little magic of MaterialUI). The UI itself is not
gorgeous at all, but user friendly enough. Take a look:</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*kcMaENFACILGxwWiugxOmQ.png"></p>
<p>I added an “infinite scrolling” feature to avoid memory leaks on the browser and
crashes in the application when the user receives hundreds of results.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*qYkbPmfXFccf2172CzJ4WQ.png"></p>
<p>Even though this app is small, I wanted to take care of state management outside
of React itself. That’s where <a href="https://redux.js.org/">Redux</a> came in handy. In
case you’re not familiar with it, <a href="https://redux.js.org/">Redux</a> is a popular
library in the React community that takes care of application state by applying
concepts from Facebook’s Flux pattern. And it does the job great. I created two
stores, separating the app in two main modules: Search and Results. I decided to
use the “ducks pattern” because I used it in other projects and I liked its
ending structure. Basically, this pattern consists in putting reducers, action
creators and thunks from a same module in a single file. I moved everything from
‘search term’ to ‘search results items’ into Redux’s state, thus making the code
structure cleaner and nicer. <a href="https://github.com/erikras/ducks-modular-redux">Read more about the ducks pattern here
!</a> Asynchronous execution was
taken care of by Redux Thunk. Here’s the Search Results module file:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> io <span class="token keyword">from</span> <span class="token string">'socket.io-client'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../api/Services'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> networkActionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../Network'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> strings <span class="token keyword">from</span> <span class="token string">'../../strings'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> rank <span class="token keyword">from</span> <span class="token string">'../../utils/rank'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> resultsSocket<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">SNACKBAR_DELAY</span> <span class="token operator">=</span> <span class="token number">2200</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">INITIAL_STATE</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  searchResults<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  searchUUID<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  notificationOpen<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  notificationText<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> actionTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">APPEND_SEARCH_RESULTS</span><span class="token punctuation">:</span> <span class="token string">'crawlio/SearchResults/APPEND_SEARCH_RESULTS'</span><span class="token punctuation">,</span>
  <span class="token constant">UPDATE_SEARCH_UUID</span><span class="token punctuation">:</span> <span class="token string">'crawlio/SearchResults/UPDATE_SEARCH_UUID'</span><span class="token punctuation">,</span>
  <span class="token constant">START_SEARCHING</span><span class="token punctuation">:</span> <span class="token string">'crawlio/SearchResults/START_SEARCHING'</span><span class="token punctuation">,</span>
  <span class="token constant">SHOW_NOTIFICATION</span><span class="token punctuation">:</span> <span class="token string">'crawlio/SearchResults/SHOW_NOTIFICATION'</span><span class="token punctuation">,</span>
  <span class="token constant">HIDE_NOTIFICATION</span><span class="token punctuation">:</span> <span class="token string">'crawlio/SearchResults/HIDE_NOTIFICATION'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> actionCreators <span class="token operator">=</span> <span class="token punctuation">{</span>
  appendSearchResults<span class="token punctuation">:</span> <span class="token punctuation">(</span>results<span class="token punctuation">,</span> searchTerm<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> actionTypes<span class="token punctuation">.</span><span class="token constant">APPEND_SEARCH_RESULTS</span><span class="token punctuation">,</span>
    payload<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      results<span class="token punctuation">,</span>
      searchTerm<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  updateSearchUUID<span class="token punctuation">:</span> uuid <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> actionTypes<span class="token punctuation">.</span><span class="token constant">UPDATE_SEARCH_UUID</span><span class="token punctuation">,</span>
    payload<span class="token punctuation">:</span> uuid<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  startSearching<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> actionTypes<span class="token punctuation">.</span><span class="token constant">START_SEARCHING</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  showNotification<span class="token punctuation">:</span> text <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> actionTypes<span class="token punctuation">.</span><span class="token constant">SHOW_NOTIFICATION</span><span class="token punctuation">,</span>
    payload<span class="token punctuation">:</span> text<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  hideNotification<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> actionTypes<span class="token punctuation">.</span><span class="token constant">HIDE_NOTIFICATION</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> thunks <span class="token operator">=</span> <span class="token punctuation">{</span>
  searchTerm<span class="token punctuation">:</span> term <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span>dispatch<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>networkActionCreators<span class="token punctuation">.</span><span class="token function">updateLoadingState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">startSearching</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> http<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>term<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> uuid <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

      <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">updateSearchUUID</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span>thunks<span class="token punctuation">.</span><span class="token function">initializeWebSocket</span><span class="token punctuation">(</span>term<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  initializeWebSocket<span class="token punctuation">:</span> term <span class="token operator">=></span> <span class="token punctuation">(</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span>dispatch<span class="token punctuation">,</span> getState<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      resultsSocket <span class="token operator">=</span> io<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">REACT_APP_WEBSOCKET_HOST</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          uuid<span class="token punctuation">:</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>results<span class="token punctuation">.</span>searchUUID<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      resultsSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'results'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'received results'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">appendSearchResults</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>results<span class="token punctuation">,</span> term<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>results<span class="token punctuation">.</span>notificationOpen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">snackbarResults</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>providerName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token constant">SNACKBAR_DELAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span>actionCreators<span class="token punctuation">.</span><span class="token function">showNotification</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span><span class="token function">snackbarResults</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>providerName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      resultsSocket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span>networkActionCreators<span class="token punctuation">.</span><span class="token function">updateLoadingState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
  actionTypes <span class="token keyword">as</span> searchResultsActionTypes<span class="token punctuation">,</span>
  actionCreators <span class="token keyword">as</span> searchResultsActionCreators<span class="token punctuation">,</span>
  thunks <span class="token keyword">as</span> searchResultsThunks<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token constant">INITIAL_STATE</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">APPEND_SEARCH_RESULTS</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        searchResults<span class="token punctuation">:</span>
          <span class="token function">rank</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>searchResults<span class="token punctuation">,</span> <span class="token operator">...</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>results<span class="token punctuation">]</span><span class="token punctuation">,</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>searchTerm<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">UPDATE_SEARCH_UUID</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        searchUUID<span class="token punctuation">:</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">START_SEARCHING</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        searchResults<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">SHOW_NOTIFICATION</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        notificationOpen<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        notificationText<span class="token punctuation">:</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> actionTypes<span class="token punctuation">.</span><span class="token constant">HIDE_NOTIFICATION</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        notificationOpen<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        notificationText<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h4>Did I need Redux at all in the first place?</h4>
<p>Short answer: no. Longer answer: this project probably wasn’t large enough to
justify the usage of this library. However, I wanted to create and end-to-end
sample product, and I considered this appropriate. The beauty of Redux is that
you can move your state from components to actual stores, making your
architecture more reliable, consistent and scalable.</p>
<h4>Moving to the back end</h4>
<p>The back end of the project is also tiny, yet powerful. From crawl-io’s
perspective, there are two types of sites: the ones that include a REST API for
searching and the ones that don’t. I called all of them <strong>providers</strong>.</p>
<p>The ‘data-providers’ directory contains this information about the sites: What
are their names? What type of sites are they? Which are the CSS Selectors to
retrieve the data? Which is the endpoint that I need to call if it’s a REST API?
All these questions get an answer in a separate provider file. A separate
function constructs the object that describes all the necessary data. This
collection of functions gets copied in build time to the front end side in order
to add dynamic filtering. Here’s a sample provider file:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token punctuation">{</span> plusURLEncoder <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../urlEncoders'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">alamaula</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    providerType<span class="token punctuation">:</span> <span class="token string">'scrapper'</span><span class="token punctuation">,</span>
    providerData<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'AlaMaula'</span><span class="token punctuation">,</span>
      image<span class="token punctuation">:</span> <span class="token string">'https://pulsosocial.com/wp-content/uploads/2011/12/alamaula-alta-resolucion-e1323201111244.png'</span><span class="token punctuation">,</span>
      url<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`https://www.alamaula.com/s-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">plusURLEncoder</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>searchTerm<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/v1q0p1`</span></span><span class="token punctuation">,</span>
      itemSelectors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        topSelector<span class="token punctuation">:</span> <span class="token string">'.result.pictures'</span><span class="token punctuation">,</span>
        title<span class="token punctuation">:</span> <span class="token string">'.title a'</span><span class="token punctuation">,</span>
        price<span class="token punctuation">:</span> <span class="token string">'.amount'</span><span class="token punctuation">,</span>
        link<span class="token punctuation">:</span> <span class="token string">'.title a@href'</span><span class="token punctuation">,</span>
        thumbnail<span class="token punctuation">:</span> <span class="token string">'.thumb img@data-src'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      pagination<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        selector<span class="token punctuation">:</span> <span class="token string">'.pagination a.next.follows@href'</span><span class="token punctuation">,</span>
        limit<span class="token punctuation">:</span> config<span class="token punctuation">.</span>paginationLimit<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> alamaula<span class="token punctuation">;</span></code></pre></div>
<p>When a search request is received on the Node.js side, we’re launching
“concurrent” search processes for all providers. Those functions get mapped to
Promises and we notify the results to the front end using WebSockets just as the
Promises get resolved. This means that the user gets to see dynamic content in
real time. The promises can be resolved by using either a scraper function or a
rest-client function, which are implemented with X-Ray and Axios respectively.
The whole process of scraping websites takes a lot of RAM memory, so I had to
tweak the starting command to increase the heap limit for Node.js. In the middle
of this process, we create a UUID to match the session with the search request
itself, allowing the front end to listen to the right events. Here’s what the
search function looks like:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> providerCreators <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../../data-providers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> restClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./restClient'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> scrapper <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./scrapper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> getSession <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../sessions'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* eslint-disable no-param-reassign */</span>
<span class="token keyword">var</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>searchTerm<span class="token punctuation">,</span> uuid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> providers <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">createProviders</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>providerCreators<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token punctuation">(</span>
      providerCreators<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        searchTerm<span class="token punctuation">,</span>
        paginationLimit<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  providers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>prov<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prov<span class="token punctuation">.</span>providerType <span class="token operator">===</span> <span class="token string">'scrapper'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">scrapper</span><span class="token punctuation">(</span>prov<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>prov<span class="token punctuation">.</span>providerType <span class="token operator">===</span> <span class="token string">'rest'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">restClient</span><span class="token punctuation">(</span>prov<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>pr<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>pr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      promises<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getSession</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getSession</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'results'</span><span class="token punctuation">,</span> results<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>promises<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">getSession</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        promises<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getSession</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> promises<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">getSession</span><span class="token punctuation">(</span>uuid<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> search<span class="token punctuation">;</span></code></pre></div>
<h3>Implementation details</h3>
<h4>Search results ranking algorithm</h4>
<p>Ranking results is an essential piece of any search system. It’s what will make
the application useful to the user or complete garbage.</p>
<p>Say we want to search for some product like “laptop”. It’s likely that I don’t
want to see things like “laptop screen” or “laptop charger” at the top of the
page. Even though they have some words in common, they are completely different
objects. How can we take care of that despite of not having control over the
providers’ search algorithms? Some other problematic factors include:</p>
<ul>
<li>Not having pre-stored information that could be useful to make predictions.</li>
<li>Each result item consisting only of the following data: title, price, URL and
thumbnail.</li>
</ul>
<p>My conclusion was to use a weighted ranking algorithm. By using multipliers with
different values, we can modify each item’s weight according to what we consider
to be relevant or not. I used two multipliers:</p>
<ol>
<li>The closeness of the price to a central value which I called “positional
reference”. This value is calculated as an average between the arithmetic mean
and the median, because I considered it was representative enough.</li>
<li>The inclusion of the search term in the title. Believe it or not, some sites
would return a “Fridge” when looking for a “Smartphone”.</li>
</ol>
<p>Finally, this is what the algorithm looks like:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">calcMedian</span> <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  values<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> lowMiddle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> highMiddle <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span>values<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>values<span class="token punctuation">[</span>lowMiddle<span class="token punctuation">]</span> <span class="token operator">+</span> values<span class="token punctuation">[</span>highMiddle<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">calcMinAndMax</span> <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  values<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token constant">MIN</span><span class="token punctuation">:</span> values<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token constant">MAX</span><span class="token punctuation">:</span> values<span class="token punctuation">[</span>values<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/* eslint-disable no-return-assign, no-param-reassign */</span>
<span class="token keyword">const</span> <span class="token function-variable function">calcAverage</span> <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>previous<span class="token punctuation">,</span> current<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> current <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      current <span class="token operator">+=</span> previous<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> current<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> sum <span class="token operator">/</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">STATIC_MULTIPLIERS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">TITLE</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token constant">CONTAINS_TERM</span><span class="token punctuation">:</span> <span class="token number">0.9</span><span class="token punctuation">,</span>
    <span class="token constant">DOES_NOT_CONTAIN_TERM</span><span class="token punctuation">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">calcItemWeight</span> <span class="token operator">=</span> <span class="token punctuation">(</span>searchTerm<span class="token punctuation">,</span> item<span class="token punctuation">,</span> positionalRef<span class="token punctuation">,</span> <span class="token constant">MAX</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> coeficient <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>title <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> item<span class="token punctuation">.</span>title <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>searchTerm<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      coeficient <span class="token operator">*=</span> <span class="token constant">STATIC_MULTIPLIERS</span><span class="token punctuation">.</span><span class="token constant">TITLE</span><span class="token punctuation">.</span><span class="token constant">CONTAINS_TERM</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      coeficient <span class="token operator">*=</span> <span class="token constant">STATIC_MULTIPLIERS</span><span class="token punctuation">.</span><span class="token constant">TITLE</span><span class="token punctuation">.</span><span class="token constant">DOES_NOT_CONTAIN_TERM</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> price <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
  <span class="token keyword">const</span> proximityMultiplier <span class="token operator">=</span> price <span class="token operator">&lt;=</span> positionalRef <span class="token operator">?</span>
    price <span class="token operator">/</span> positionalRef <span class="token punctuation">:</span>
    <span class="token punctuation">(</span><span class="token constant">MAX</span> <span class="token operator">-</span> price<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token constant">MAX</span> <span class="token operator">-</span> positionalRef<span class="token punctuation">)</span><span class="token punctuation">;</span>

  coeficient <span class="token operator">*=</span> proximityMultiplier<span class="token punctuation">;</span>

  <span class="token keyword">return</span> coeficient<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/*
* Simple algorithm that puts a weight value in each array item,
* so that we can sort items in a more useful way.
* Relevancy factors are closeness to median/avg values and title containing the keyword.
*/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>items<span class="token punctuation">,</span> searchTerm<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>items <span class="token operator">||</span> <span class="token operator">!</span>items<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> items<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> values <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">=></span> Number<span class="token punctuation">.</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> median <span class="token operator">=</span> <span class="token function">calcMedian</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> avg <span class="token operator">=</span> <span class="token function">calcAverage</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token constant">MAX</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">calcMinAndMax</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> positionalRef <span class="token operator">=</span> <span class="token punctuation">(</span>median <span class="token operator">+</span> avg<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

  items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    item<span class="token punctuation">.</span>weight <span class="token operator">=</span> <span class="token function">calcItemWeight</span><span class="token punctuation">(</span>searchTerm<span class="token punctuation">,</span> item<span class="token punctuation">,</span> positionalRef<span class="token punctuation">,</span> <span class="token constant">MAX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  items<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> b<span class="token punctuation">.</span>weight <span class="token operator">-</span> a<span class="token punctuation">.</span>weight<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> items<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h4>ES5 or ES6 ?</h4>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/js-1fedb9281ec46d21e3bfbd075eb765eb-6f6cd.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 43.31210191082803%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1ElEQVQoz2P4cNsfK3p/C0S+uwllYEUMuCS+Pgj4eMf/x6PA308DSdP86Y7/nrVuD876rl/oumy283viNUPcWZpnPavfMSTAbM18F1wuZ8DUCbT2/8ugqmLrw1s8Jnc6NFfbPjzn8/leAKYRDGg6v9wLuHvKZ94kp+R4i3ULXFbNdQkOMN2wyOXvs8C3NwlpBlr74orf1C4HoGufXPSb2O6weLrz2xv+wMAjztl3/YH2/HwcAHQqkPHrSSBWnTgC7Lb/2xt+7276AQ0CMt7e9PuAI8AAxF9rTPzpNhoAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="js"
        title=""
        src="/static/js-1fedb9281ec46d21e3bfbd075eb765eb-fb8a0.png"
        srcset="/static/js-1fedb9281ec46d21e3bfbd075eb765eb-1a291.png 148w,
/static/js-1fedb9281ec46d21e3bfbd075eb765eb-2bc4a.png 295w,
/static/js-1fedb9281ec46d21e3bfbd075eb765eb-fb8a0.png 590w,
/static/js-1fedb9281ec46d21e3bfbd075eb765eb-6f6cd.png 785w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>If you ever read the project’s code, you’ll notice it doesn’t use the same
standards across the whole project. That’s because I wanted to showcase both ES6
on React.js and ES5 (with bits of ES6) on Node.js.</p>
<p>ES6 brings good features to the table, such as classes, arrow functions,
block-scoped variables, template literals, enhanced object literals, object
destructuring, default function arguments, etc. However, I thought it would be
interesting to stick a little bit with ES5 on the back end to showcase the
differences.</p>
<h4>Linting and Unit Testing</h4>
<p>ESLint was the perfect choice to do some Linting in the project. The project
extends Airbnb’s Lint config. Moreover, the VSCode plugin for ESLint works
extremely well. Unit testing was done by using Jest on React.js and Mocha on
Node.js. It was interesting for me to use something like Chai, which allows us
to write expressions in a way similar to natural language.</p>
<h4>Data storage</h4>
<p>Crawl-io retrieves data in real time. There’s no database to pull the
pre-indexed data from. What I did is to save each pair of results-selection in a
MongoDB collection. In a more complete implementation, that data could be useful
for some sort of Machine Learning algorithm to predict the most useful way to
rank results.</p>
<h4>A useful CI/CD Pipeline</h4>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/cicd-87de1f5e385a59b0496182fcd5dc7124-d9514.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 88.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAD+0lEQVQ4y2NgQAPiVsEMYpbBMDaTsEUgs45PErN1ZB4LSEzYPJAZKM4MUysOVYsTgBTx63rD2BES1iHFIhaBafzGvhmiFkF+ID5Q3BMqzwhSjxNIrHnMIBFdyyAM5Uu5JqhxmASoW0XkyoTkNtiouccpc5kHa8iHFvOBDTTzY5Ba/ZBBbPVjTMP+/vvHILwKIqG48RmD1fJLTDC58PzmGdZhuc8SyjoaYWKaiy8zSx77D2bb7nwOpu9//gWRbL30AUz///+fwWvvSxaYJv5dPxxNJu8+GphV/79/3ur/TgkV/00Xnt3KsfWLEUhead1jRufdL8AWK69/AtYPB3Nvf0ZxsdTqR7Mk9/z8b7z08g2r4IwfUaVd//0yaj5orbx9T2rXt/+yax83wNSKrnrMiKK54cJ7MN186QNP3qm3EUEHXq2z2P32v9CKB+kg8fzmKQFOccWLyjum24ENWPmwRmLDy//AsFvsve9lNsSUhQwvvv2BMIMPvIJ5mVlv87PNCqf//w8++GoVSIy7YC4TenjXXvigrbHx6U+1o///Z598WwUSs9v5nBnFy5obn4LDDmjrZInVj3957n3ZAVQANGwNY05tD7NRQAZLeuMUsOHL73/hq7/w3s9jz4ufptue1YLEnHa9YIYbJr/mEZwtvebxI4n1z6eA2KE777OB6PWnb8LlG5FcIbXu2U7J1Y+Ogtg8a54zKgCTEBjwroN4mWH3f1aZDc8fKi26PBGmadKSjSjenbZkA5ytuuL2JtmNL4+D2PM37Wfg2fAWIlGy8QyY7vv3nz2ka+mVgs45/+NL2xeCwhQk3r9wHcPX338ZFm3cCwtrTtvw3NW++W3/gzsWH4JZULLiICSreSWVgTW6xRdbNfbP/f/q9dtfDZOX/I8qanUBiacWNzG573nJpJI7ERzOmbW9AcF5Lf/75676lV/f/z+muFUfJB5V0IQagZn1ExRSa3q/bNh97H9p58xf+aVNSiBxnYl7WJDVBeU0GNZMWPA/rXbif4uwnDf3Hj4VRS4M2CStQ7iAGZ8bxE8ubXUKLGqfr7vo4n+pja82SC2/owISrzn/Psxtz8twhjk35GU2vTqhO+fkL9+06kmFLVMsgaUAk5R1KJukVQgnyMBmIG4A4iwxq+ACIbOAVGCmYxPb/9dXevWjr2LABGy/88V1k63PfomvfvwDaNh/qTWPn4ls/2wPjl0jPyMJy+AmIC4HYm+QgdJALAY0jBdIy8g7RQnq+SSzgxTrbnrKw7/iUZrbnhdLLbY//wZMo5dk1j4JltvwnBUsn9vLpOoSyyVhGSIubhEsBTSQG2dRJrX0FjMyv/3yB9fQg6+cYIWI1IYXTKJY9AEA5beogL0P0KgAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="cicd"
        title=""
        src="/static/cicd-87de1f5e385a59b0496182fcd5dc7124-fb8a0.png"
        srcset="/static/cicd-87de1f5e385a59b0496182fcd5dc7124-1a291.png 148w,
/static/cicd-87de1f5e385a59b0496182fcd5dc7124-2bc4a.png 295w,
/static/cicd-87de1f5e385a59b0496182fcd5dc7124-fb8a0.png 590w,
/static/cicd-87de1f5e385a59b0496182fcd5dc7124-d9514.png 600w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>My CI/CD pipeline consists in these steps:</p>
<ul>
<li>Running all tests from React and Node</li>
<li>Building a Docker image and <a href="https://hub.docker.com/r/agustinaliagac/crawlio/">deploying it to Docker
Hub</a></li>
<li>Deploying the project in VPS server through SSH</li>
</ul>
<p>All of this runs <a href="https://circleci.com/gh/agustinaliagac/crawl-io/">on a public CircleCI
job</a>. I could have picked
TravisCI, Jenkins or others. But it had a good free plan for open source
projects, which supports docker builds, so I went with it.</p>
<p>As I wrote in my previous <a href="https://medium.com/@agustin.aliaga/how-docker-worked-for-me-as-a-software-developer-58a049f132ff">article about Docker from a developer’s
perspective</a>,
I <strong>really</strong> like Docker. I must add that it was delightful to run my scraper
image inside a set of different containers with Docker Compose. I didn’t really
get to use Swarm or Kubernetes because they exceeded my needs. I got to run my
app in a controlled environment, with other cool services like Nginx or MongoDB
without having to install them in my local machine.</p>
<h4>Unsolved challenges</h4>
<p>Some sites heavily use front end frameworks and do AJAX calls, which makes it
harder for the scraper to extract data. A solution to this may be to add
PhantomJS, but I’m afraid it would take a serious amount of RAM.</p>
<h3>Source</h3>
<p>Source:
<a href="https://github.com/agustinaliagac/crawl-io">https://github.com/agustinaliagac/crawl-io/</a></p></div><hr style="margin-bottom:1.75rem"/><div style="display:flex;margin-bottom:0rem"><img src="/static/profile-pic-948858fbb9eeaf3575a99336404ffa5a.jpeg" alt="Agustín Aliaga" style="margin-right:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem;border-radius:50%"/><p><strong>Agustín Aliaga</strong><br/>Software Developer</p></div><div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/how-docker-worked-for-me-as-a-software-developer/">← <!-- -->How Docker worked for me as a software developer</a></li><li><a rel="next" href="/blog/js-guide-for-java-devs-part-1/">JS guide for Java developers: Part 1 — scope, closures, global context, this, and undefined<!-- --> →</a></li></ul><div id="disqus_thread"></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"blog-building-an-ecommerce-scraper-with-node-js-and-react-js-4fd","path":"/blog/building-an-ecommerce-scraper-with-node-js-and-react-js/"};window.dataPath="842/path---blog-building-an-ecommerce-scraper-with-node-js-and-react-js-4-fd-e15-LTcpcsJkOA3AHTsyK7AprViNRac";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.7106b9c6fdd909feef5d.css","/app-2c628e97cad5920cf5bd.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-4158c07ead1177917d7b.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-8c4b7de89aa58d33c7cd.js"],"component---src-pages-404-js":["/component---src-pages-404-js-7db2702442c72d08d460.js"],"component---src-pages-index-js":["/component---src-pages-index-js-1bb3ec446e4c06c347bc.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-67b019893058f3d9e92a.js"]};/*]]>*/</script><script src="/webpack-runtime-b7f70802bfbf60d654ea.js" async=""></script><script src="/app-2c628e97cad5920cf5bd.js" async=""></script><script src="/0-cee1a49f5378c1ba6db8.js" async=""></script><script src="/component---src-templates-blog-post-js-8c4b7de89aa58d33c7cd.js" async=""></script></body></html>